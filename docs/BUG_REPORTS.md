# üêû –ë–∞–≥-—Ä–µ–ø–æ—Ä—Ç—ã –ø–æ API

–°–æ–±—Ä–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã, –≤—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤ API –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞.

## üêû –ë–∞–≥ –†–µ–ø–æ—Ä—Ç #1: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç–æ–∫–µ–Ω–∞ (403 Forbidden)

- **–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** üî• –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è (Critical)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî∫ –í—ã—Å–æ–∫–∏–π (High)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç / –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
  - `GET /api/request`
  - `GET /api/request/{id}`
  - `POST /api/request/{id}/contribution`
  - `POST /api/auth` (–Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã)
  - `GET /api/user` (–±–µ–∑ —Ç–æ–∫–µ–Ω–∞)
  - `DELETE /api/user/favourites/{id}` (–±–µ–∑ —Ç–æ–∫–µ–Ω–∞)

### üìù –û–ø–∏—Å–∞–Ω–∏–µ

–ú–Ω–æ–≥–∏–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã, –∫–æ—Ç–æ—Ä—ã–µ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∏–ª–∏ –¥–æ–ª–∂–Ω—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –µ—ë –æ—à–∏–±–∫–∏, –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç `403 Forbidden` —Å —Ç–µ–ª–æ–º `{"message":"No token provided."}`. Middleware –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚Äî –æ—Å–æ–±–µ–Ω–Ω–æ —ç—Ç–æ –∫–∞—Å–∞–µ—Ç—Å—è `POST /api/auth`, –∫–æ—Ç–æ—Ä—ã–π –Ω–µ –¥–æ–ª–∂–µ–Ω —Ç—Ä–µ–±–æ–≤–∞—Ç—å —Ç–æ–∫–µ–Ω, —Ç–∞–∫ –∫–∞–∫ —Å–∞–º –µ–≥–æ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç.

### üîÅ –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

1. `GET /api/request`
2. `GET /api/request/some-id`
3. `POST /api/request/some-id/contribution`
4. `POST /api/auth` —Å –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—â–∏–º `password`, `login`, –∏–ª–∏ —Å –Ω–µ–≤–∞–ª–∏–¥–Ω—ã–º `login`
5. `GET /api/user` –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Authorization`
6. `DELETE /api/user/favourites/any-id` –±–µ–∑ –∑–∞–≥–æ–ª–æ–≤–∫–∞ `Authorization`

### ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

- **1‚Äì3:** `200 OK` (–∏–ª–∏ `404 Not Found`, –µ—Å–ª–∏ ID –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)
- **4:** `400 Bad Request`
- **5‚Äì6:** `401 Unauthorized`

### ‚ùå –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

`403 Forbidden`, —Ç–µ–ª–æ `{"message":"No token provided."}`

---

## üêû –ë–∞–≥ –†–µ–ø–æ—Ä—Ç #2: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å 500 –≤–º–µ—Å—Ç–æ 4xx –¥–ª—è –æ—à–∏–±–æ–∫ –∫–ª–∏–µ–Ω—Ç–∞

- **–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** üî¥ –í—ã—Å–æ–∫–∞—è (Major)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üî∫ –í—ã—Å–æ–∫–∏–π (High)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç / –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã:**
  - `POST /api/auth`
  - `GET /api/user`
  - `GET /api/user/favourites`
  - `GET /api/request/{id}`

### üìù –û–ø–∏—Å–∞–Ω–∏–µ

API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `500 Internal Server Error` –≤ —Å–∏—Ç—É–∞—Ü–∏—è—Ö, –∫–æ–≥–¥–∞ –æ–∂–∏–¥–∞—é—Ç—Å—è –æ—à–∏–±–∫–∏ –∫–ª–∏–µ–Ω—Ç–∞ (–Ω–µ–≤–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –ø—É—Å—Ç–æ–π payload, –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π —Ä–µ—Å—É—Ä—Å). –ò–Ω–æ–≥–¥–∞ —Ç–µ–ª–æ –æ—Ç–≤–µ—Ç–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç `"Planned Server Error"`.

### üîÅ –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

1. `POST /api/auth` —Å –Ω–µ–≤–µ—Ä–Ω—ã–º –ª–æ–≥–∏–Ω–æ–º/–ø–∞—Ä–æ–ª–µ–º
2. `POST /api/auth` —Å –ø—É—Å—Ç—ã–º —Ç–µ–ª–æ–º (`{}`)
3. `GET /api/user` (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å)
4. `GET /api/user/favourites` (—É—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å)
5. `GET /api/request/{id}` —Å –Ω–µ—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º ID

### ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

- **1‚Äì2:** `400 Bad Request`
- **3‚Äì4:** `200 OK`
- **5:** `404 Not Found`

### ‚ùå –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

`500 Internal Server Error`, –∏–Ω–æ–≥–¥–∞ —Å —Ç–µ–ª–æ–º `"Planned Server Error"`

---

## üêû –ë–∞–≥ –†–µ–ø–æ—Ä—Ç #3: –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –ª–æ–≥–∏–∫–∞ —É–¥–∞–ª–µ–Ω–∏—è –∏–∑ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

- **–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è (Normal)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π (Medium)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç / –≠–Ω–¥–ø–æ–∏–Ω—Ç:** `DELETE /api/user/favourites/{requestId}`

### üìù –û–ø–∏—Å–∞–Ω–∏–µ

–ï—Å–ª–∏ –ø–æ–ø—ã—Ç–∞—Ç—å—Å—è —É–¥–∞–ª–∏—Ç—å `requestId`, –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–µ—Ç –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–º, API –≤—Å—ë —Ä–∞–≤–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `200 OK` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º `"Request is removed from Favourites successfully."`, —Ö–æ—Ç—è —É–¥–∞–ª—è—Ç—å –Ω–µ—á–µ–≥–æ.

### üîÅ –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `DELETE` –Ω–∞ `/api/user/favourites/{non_existent_id}`

### ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

`400 Bad Request` –∏–ª–∏ `404 Not Found` (—Å–æ–≥–ª–∞—Å–Ω–æ Swagger)

### ‚ùå –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

`200 OK`, —Ç–µ–ª–æ: `"Request is removed from Favourites successfully."`

---

## üêû –ë–∞–≥ –†–µ–ø–æ—Ä—Ç #4: –ù–µ–æ–∂–∏–¥–∞–Ω–Ω–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ

- **–°–µ—Ä—å–µ–∑–Ω–æ—Å—Ç—å:** ‚ö†Ô∏è –°—Ä–µ–¥–Ω—è—è (Normal)
- **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** üü° –°—Ä–µ–¥–Ω–∏–π (Medium)
- **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç / –≠–Ω–¥–ø–æ–∏–Ω—Ç:** `POST /api/user/favourites`

### üìù –û–ø–∏—Å–∞–Ω–∏–µ

–ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –≤–∞–ª–∏–¥–Ω–æ–≥–æ `requestId` –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `400 Bad Request` —Å —Å–æ–æ–±—â–µ–Ω–∏–µ–º `"Failed to add request to favourites"`, –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã.

### üîÅ –®–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

1. –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `POST` –Ω–∞ `/api/user/favourites` —Å —Ç–µ–ª–æ–º:

   ```json
   {
     "requestId": "request-id-1"
   }
   ```

### ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

`200 OK`, —Ç–µ–ª–æ: `"–ó–∞–ø—Ä–æ—Å —É—Å–ø–µ—à–Ω–æ –¥–æ–±–∞–≤–ª–µ–Ω –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ."`

### ‚ùå –§–∞–∫—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

`400 Bad Request`, —Ç–µ–ª–æ: `"Failed to add request to favourites"`

### üí° –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ

–¢—Ä–µ–±—É–µ—Ç—Å—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ –¥–ª—è –≤—ã—è—Å–Ω–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã.

---
