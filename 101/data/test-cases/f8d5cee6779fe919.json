{"uid":"f8d5cee6779fe919","name":"Тест успешного удаления запроса из избранного","fullName":"tests.user.test_user_api.TestUserAPI#test_remove_from_favourites_success","historyId":"ceac80401fd9e5cd9418de44e0277fcd","time":{"start":1746486678666,"stop":1746486678666,"duration":0},"description":"Проверяем удаление ранее добавленного элемента из избранного.","descriptionHtml":"<p>Проверяем удаление ранее добавленного элемента из избранного.</p>\n","status":"skipped","statusMessage":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites","statusTrace":"('/app/tests/user/test_user_api.py', 89, 'Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\\nBody of the answer:\\nFailed to add request to favourites')","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":1,"retriesStatusChange":true,"beforeStages":[{"name":"pytestconfig","time":{"start":1746486675944,"stop":1746486675944,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"delete_output_dir","time":{"start":1746486675944,"stop":1746486675944,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"base_url","time":{"start":1746486675945,"stop":1746486675945,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"_verify_url","time":{"start":1746486675945,"stop":1746486675945,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright_instance","time":{"start":1746486675945,"stop":1746486676437,"duration":492},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_request_context","time":{"start":1746486676437,"stop":1746486676474,"duration":37},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"http_client","time":{"start":1746486676474,"stop":1746486676475,"duration":1},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"auth_client","time":{"start":1746486676475,"stop":1746486676475,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"auth_token","time":{"start":1746486678562,"stop":1746486678642,"duration":80},"status":"failed","statusMessage":"Failed: КРИТИЧЕСКАЯ ОШИБКА: He удалось выполнить сессионный логин для пользователя testUser4@test.com. Ошибка: The status was pending 200, but received 500. URL: http://localhost:4040/api/auth\nBody of the answer:\nPlanned Server Error\n","statusTrace":"  File \"/app/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.13/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/app/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/app/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 1140, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/app/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 898, in call_fixture_func\n    fixture_result = fixturefunc(**kwargs)\n  File \"/app/tests/conftest.py\", line 109, in auth_token_fixture\n    pytest.fail(\n    ~~~~~~~~~~~^\n        f\"КРИТИЧЕСКАЯ ОШИБКА: He удалось выполнить сессионный логин для пользователя \"\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        f\"{TEST_USER_LOGIN}. Ошибка: {e}\",\n        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n        pytrace=False,\n        ^^^^^^^^^^^^^^\n    )\n    ^\n  File \"/app/.venv/lib/python3.13/site-packages/_pytest/outcomes.py\", line 178, in fail\n    raise Failed(msg=reason, pytrace=pytrace)\n","steps":[],"attachments":[{"uid":"a8ae54396c8a56bf","name":"Status Code: 500","source":"a8ae54396c8a56bf.txt","type":"text/plain","size":3},{"uid":"6b6f40749be9a3dd","name":"Request URL","source":"6b6f40749be9a3dd.uri","type":"text/uri-list","size":30},{"uid":"24bc429362aae754","name":"Response Headers (JSON)","source":"24bc429362aae754.json","type":"application/json","size":309},{"uid":"7dfe0ba548aa4958","name":"Response Body (Text)","source":"7dfe0ba548aa4958.txt","type":"text/plain","size":20},{"uid":"bcb19e4b7672c93b","name":"Status response code: 500 (Expected: 200)","source":"bcb19e4b7672c93b.txt","type":"text/plain","size":3}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":5,"hasContent":true,"attachmentStep":false},{"name":"auth_token","time":{"start":1746486678668,"stop":1746486678795,"duration":127},"status":"passed","steps":[],"attachments":[{"uid":"8bbf3bc045ee6986","name":"Status Code: 200","source":"8bbf3bc045ee6986.txt","type":"text/plain","size":3},{"uid":"ca99dbe24bfd098e","name":"Request URL","source":"ca99dbe24bfd098e.uri","type":"text/uri-list","size":30},{"uid":"e91ef990864bdd","name":"Response Headers (JSON)","source":"e91ef990864bdd.json","type":"application/json","size":317},{"uid":"fa7c31166f09f249","name":"Response Body (JSON)","source":"fa7c31166f09f249.json","type":"application/json","size":224},{"uid":"6a822b94ac25859c","name":"Status response code: 200 (Expected: 200)","source":"6a822b94ac25859c.txt","type":"text/plain","size":3},{"uid":"6370c73c4d90961f","name":"Body of the answer (failed by AuthSuccessResponse)","source":"6370c73c4d90961f.json","type":"application/json","size":220}],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":6,"hasContent":true,"attachmentStep":false},{"name":"authenticated_api_req_context","time":{"start":1746486678796,"stop":1746486678812,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"authenticated_http_client","time":{"start":1746486678812,"stop":1746486678812,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"authenticated_user_client","time":{"start":1746486678812,"stop":1746486678812,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"setup_favourite","time":{"start":1746486678812,"stop":1746486678904,"duration":92},"status":"skipped","statusMessage":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites\n","statusTrace":"  File \"/app/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 167, in _multicall\n    teardown.throw(outcome._exception)\n    ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.13/site-packages/_pytest/setuponly.py\", line 36, in pytest_fixture_setup\n    return (yield)\n            ^^^^^\n  File \"/app/.venv/lib/python3.13/site-packages/pluggy/_callers.py\", line 103, in _multicall\n    res = hook_impl.function(*args)\n  File \"/app/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 1140, in pytest_fixture_setup\n    result = call_fixture_func(fixturefunc, request, kwargs)\n  File \"/app/.venv/lib/python3.13/site-packages/_pytest/fixtures.py\", line 891, in call_fixture_func\n    fixture_result = next(generator)\n  File \"/app/tests/user/conftest.py\", line 28, in setup_favourite\n    pytest.skip(f\"He удалось добавить элемент в избранное для тестов удаления: {e}\")\n    ~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n  File \"/app/.venv/lib/python3.13/site-packages/_pytest/outcomes.py\", line 160, in skip\n    raise Skipped(msg=reason, allow_module_level=allow_module_level)\n","steps":[{"name":"Добавление запроса в избранное","time":{"start":1746486678813,"stop":1746486678901,"duration":88},"status":"failed","statusMessage":"AssertionError: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites\n","statusTrace":"  File \"/app/.venv/lib/python3.13/site-packages/allure_commons/_allure.py\", line 202, in impl\n    return func(*a, **kw)\n  File \"/app/api/user/client.py\", line 63, in add_to_favourites\n    processed_response = self._handle_response(response, expected_status)\n  File \"/app/api/base_api.py\", line 69, in _handle_response\n    assert response.status == expected_status, (\n           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^\n","steps":[],"attachments":[{"uid":"70eaf47684bf89b2","name":"Status Code: 400","source":"70eaf47684bf89b2.txt","type":"text/plain","size":3},{"uid":"4e8fa047be2ef9bc","name":"Request URL","source":"4e8fa047be2ef9bc.uri","type":"text/uri-list","size":41},{"uid":"6eb9e81c241a79f8","name":"Response Headers (JSON)","source":"6eb9e81c241a79f8.json","type":"application/json","size":309},{"uid":"488394dcffcdc173","name":"Response Body (Text)","source":"488394dcffcdc173.txt","type":"text/plain","size":35},{"uid":"9b2e0727ef2f89a7","name":"Status response code: 400 (Expected: 200)","source":"9b2e0727ef2f89a7.txt","type":"text/plain","size":3}],"parameters":[{"name":"payload","value":"AddToFavouritesPayload(request_id='test-fav-3df6798a-1c78-4d1b-b0af-e0cf0266bf4b')"},{"name":"expected_status","value":"200"}],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":5,"hasContent":true,"attachmentStep":false}],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":1,"attachmentsCount":5,"hasContent":true,"attachmentStep":false}],"testStage":{"description":"Проверяем удаление ранее добавленного элемента из избранного.","status":"skipped","statusMessage":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites","statusTrace":"('/app/tests/user/test_user_api.py', 89, 'Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\\nBody of the answer:\\nFailed to add request to favourites')","steps":[],"attachments":[{"uid":"304d0c087b6eb48b","name":"log","source":"304d0c087b6eb48b.txt","type":"text/plain","size":2797},{"uid":"51651726a250310c","name":"stderr","source":"51651726a250310c.txt","type":"text/plain","size":3141}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":2,"hasContent":true,"attachmentStep":false},"afterStages":[{"name":"authenticated_api_req_context::0","time":{"start":1746486678911,"stop":1746486678926,"duration":15},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"api_request_context::0","time":{"start":1746486679111,"stop":1746486679127,"duration":16},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"playwright_instance::0","time":{"start":1746486679129,"stop":1746486679143,"duration":14},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false}],"labels":[{"name":"severity","value":"normal"},{"name":"story","value":"Удаление из избранного"},{"name":"epic","value":"Управление пользователем"},{"name":"feature","value":"Избранное пользователя (DELETE /api/user/favourites/{id})"},{"name":"tag","value":"@pytest.mark.usefixtures('setup_favourite')"},{"name":"tag","value":"positive"},{"name":"tag","value":"user"},{"name":"parentSuite","value":"tests.user"},{"name":"suite","value":"test_user_api"},{"name":"subSuite","value":"TestUserAPI"},{"name":"host","value":"fv-az740-563"},{"name":"thread","value":"12-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"tests.user.test_user_api"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[{"uid":"fb7e749980ce0724","status":"failed","statusDetails":"Failed: КРИТИЧЕСКАЯ ОШИБКА: He удалось выполнить сессионный логин для пользователя testUser4@test.com. Ошибка: The status was pending 200, but received 500. URL: http://localhost:4040/api/auth\nBody of the answer:\nPlanned Server Error","time":{"start":1746486678560,"stop":1746486678560,"duration":0}}],"categories":[],"history":{"statistic":{"failed":0,"broken":0,"skipped":12,"passed":0,"unknown":0,"total":12},"items":[{"uid":"5dc3d617a34c7648","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/100//#testresult/5dc3d617a34c7648","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 500. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nPlanned Server Error","time":{"start":1746483620245,"stop":1746483620245,"duration":0}},{"uid":"79b4025b72f1c2aa","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/99//#testresult/79b4025b72f1c2aa","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites","time":{"start":1746483424604,"stop":1746483424604,"duration":0}},{"uid":"bc3a9cc46fe33d83","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/98//#testresult/bc3a9cc46fe33d83","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites","time":{"start":1746482682003,"stop":1746482682003,"duration":0}},{"uid":"ecba62144acf8b27","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/97//#testresult/ecba62144acf8b27","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites","time":{"start":1746481275421,"stop":1746481275421,"duration":0}},{"uid":"40708e190a135f48","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/96//#testresult/40708e190a135f48","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 500. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nPlanned Server Error","time":{"start":1746479137717,"stop":1746479137717,"duration":0}},{"uid":"78dd8e5921a8a09e","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/95//#testresult/78dd8e5921a8a09e","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites","time":{"start":1746478918495,"stop":1746478918495,"duration":0}},{"uid":"13a6092f2408bcd9","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/94//#testresult/13a6092f2408bcd9","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites","time":{"start":1746398527117,"stop":1746398527117,"duration":0}},{"uid":"bf40ac41e11ccd98","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/93//#testresult/bf40ac41e11ccd98","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites","time":{"start":1746398346854,"stop":1746398346854,"duration":0}},{"uid":"e869d1033574c8c9","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/92//#testresult/e869d1033574c8c9","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites","time":{"start":1746398074134,"stop":1746398074134,"duration":0}},{"uid":"2414e6e07c7d8832","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/91//#testresult/2414e6e07c7d8832","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 500. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nPlanned Server Error","time":{"start":1746395043953,"stop":1746395043953,"duration":0}},{"uid":"fbd10ca074ae7145","reportUrl":"https://ZhikharevAl.github.io/fake_it_till_you_make_it/90//#testresult/fbd10ca074ae7145","status":"skipped","statusDetails":"Skipped: He удалось добавить элемент в избранное для тестов удаления: The status was pending 200, but received 400. URL: http://localhost:4040/api/user/favourites\nBody of the answer:\nFailed to add request to favourites","time":{"start":1746394512685,"stop":1746394512685,"duration":0}}]},"tags":["@pytest.mark.usefixtures('setup_favourite')","positive","user"]},"source":"f8d5cee6779fe919.json","parameterValues":[]}